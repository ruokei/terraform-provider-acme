---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "st-alicloud_emr_metric_auto_scaling_rules Resource - st-alicloud"
subcategory: ""
description: |-
  Auto scaling rule for AliCloud E-MapReduce cluster nodes.
---

# st-alicloud_emr_metric_auto_scaling_rules (Resource)

Auto scaling rule for AliCloud E-MapReduce cluster nodes.

## Example Usage

```terraform
resource "st-alicloud_emr_metric_auto_scaling_rules" "metric_auto_scaling" {
  cluster_id = "c-1234567890"
  max_nodes  = "10"
  min_nodes  = "1"

  scaling_rule {
    rule_name                 = "rule1"
    multi_metric_relationship = "Or"
    statistical_period        = 300
    evaluation_count          = 1
    scale_operation           = "SCALE_OUT"
    scaling_node_count        = 1
    cooldown_time             = 120

    metric_rule {
      metric_name         = "yarn_resourcemanager_queue_AvailableMBPercentage"
      comparison_operator = "LE"
      statistical_measure = "AVG"
      threshold           = "20"
    }

    metric_rule {
      metric_name         = "yarn_resourcemanager_queue_AvailableVCoresPercentage"
      comparison_operator = "LE"
      statistical_measure = "AVG"
      threshold           = "20"
    }
  }

  scaling_rule {
    rule_name                 = "rule2"
    multi_metric_relationship = "Or"
    statistical_period        = 300
    evaluation_count          = 1
    scale_operation           = "SCALE_IN"
    scaling_node_count        = 1
    cooldown_time             = 120

    metric_rule {
      metric_name         = "yarn_resourcemanager_queue_AvailableMBPercentage"
      comparison_operator = "GE"
      statistical_measure = "AVG"
      threshold           = "50"
    }

    metric_rule {
      metric_name         = "yarn_resourcemanager_queue_AvailableVCoresPercentage"
      comparison_operator = "GE"
      statistical_measure = "AVG"
      threshold           = "50"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->

## Schema

### Required

- `cluster_id` (String) Alicloud E-MapReduce cluster ID.
- `max_nodes` (Number) Maximum capacity of scaling for nodes.
- `min_nodes` (Number) Minimum capacity of scaling for nodes.

### Optional

- `scaling_rule` (Block List) (see [below for nested schema](#nestedblock--scaling_rule))

### Read-Only

- `node_group_id` (String) Alicloud E-MapReduce cluster task node group ID.

<a id="nestedblock--scaling_rule"></a>

### Nested Schema for `scaling_rule`

Required:

- `evaluation_count` (Number) Amount of times scaling is triggered. (Repetitions that trigger scale out.)
- `multi_metric_relationship` (String) Determines whether auto scaling triggers when all metrics match the rules **(And)** or any metrics match the rules **(Or)**. <br/>**Accepted values**: `And`, `Or`.
- `rule_name` (String) Auto scaling rule name.
- `scale_operation` (String) Scaling mode, scale out (up) or scale in (down). <br/>**Accepted values**: `SCALE_OUT`, `SCALE_IN`
- `scaling_node_count` (Number) Number of nodes being scaled up or down.
- `statistical_period` (Number) Period to collect cluster load metrics.

Optional:

- `cooldown_time` (Number) The interval between two scaling activities. During the cooldown time, auto scaling is not performed even if the required rule is triggered.
- `metric_rule` (Block List) (see [below for nested schema](#nestedblock--scaling_rule--metric_rule))

<a id="nestedblock--scaling_rule--metric_rule"></a>

### Nested Schema for `scaling_rule.metric_rule`

Required:

- `comparison_operator` (String) Comparison operator. <br/>**Accepted values**:
  `EQ`: equals,
  `NE`: not equals,
  `GT`: greater than,
  `LT`: lesser than,
  `GE`: greater or equal,
  `LE`: lesser or equal.
- `metric_name` (String) Metric name.
- `statistical_measure` (String) Statistical measure. <br/>**Accepted values**: `AVG`, `MIN`, `MAX`.
- `threshold` (Number) Threshold percentage of metric to trigger auto scaling.
